# Default values for teamcity.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.

## Service Account
## Ref: https://kubernetes.io/docs/admin/service-accounts-admin/
##
serviceAccount:
  create: true
  ## The name of the ServiceAccount to use.
  ## If not set and create is true, a name is generated using the fullname template
  name:

## Role Based Access Control
## Ref: https://kubernetes.io/docs/admin/authorization/rbac/
rbac:
  create: true
  role:
    ## Rules to create. It follows the role specification
    rules:
      - apiGroups:
          - ''
        resources:
          - services
          - endpoints
          - pods
        verbs:
          - get
          - watch
          - list

agent:
  replicaCount: 1
  image:
    repository: jetbrains/teamcity-agent
    pullPolicy: Always
  resources:
    limits:
      cpu: 800m
      memory: 968Mi
    requests:
      cpu: 600m
      memory: 968Mi
  
replicaCount: 1

image:
  repository: jetbrains/teamcity-server
  pullPolicy: Always

service:
  type: NodePort
  port: 8111

ingress:
  enabled: true
  defaultBackend:
    enabled: true
  annotations:
    kubernetes.io/ingress.class: nginx
    kubernetes.io/tls-acme: "true"
    nginx.ingress.kubernetes.io/proxy-body-size: 2000m
  path: /
  hosts:
    - teamcity.local
  tls:
    # Secrets must be manually created in the namespace.
    - secretName: teamcity.local
      hosts:
        - teamcity.local
  labels:
    # traffic-type: external
    # traffic-type: internal

resources:
  limits:
    cpu: 800m
    memory: 968Mi
  requests:
    cpu: 600m
    memory: 968Mi
pvc:
  server:
    enabled: true
    storageClass: standard
    storageSize: 1Gi
  client:
    enabled: true
    storageClass: standard
    storageSize: 1Gi
  
nodeSelector: {}

tolerations: []

affinity: {}

